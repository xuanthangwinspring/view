<meta http-equiv="refresh" content="720">
<div id="video-container"></div>

<script>
const videoId = "HfyeVHIETJ4";
const videoDuration = 600;

// ===== Kiểm tra thiết bị =====
function isMobileDevice() {
    const userAgent = navigator.userAgent || navigator.vendor || window.opera;

    // Kiểm tra điện thoại
    const isMobileUA = /android.*mobile|iphone|ipod|windows phone/i.test(userAgent);

    // Kiểm tra theo kích thước màn hình (bổ sung)
    const isSmallScreen = window.innerWidth <= 768;

    return isMobileUA || isSmallScreen;
}

// Nếu là điện thoại thì 20 iframe, còn lại 60
const iframeCount = isMobileDevice() ? 20 : 60;

const container = document.getElementById("video-container");

for (let i = 0; i < iframeCount; i++) {

    function createIframe() {
        const randomStart = Math.floor(Math.random() * (videoDuration - 5));

        const iframe = document.createElement("iframe");
        iframe.width = "560";
        iframe.height = "315";
        iframe.src = `https://www.youtube.com/embed/${videoId}?start=${randomStart}&rel=0&autoplay=1&mute=1`;
        iframe.title = "YouTube video player";
        iframe.frameBorder = "0";
        iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
        iframe.allowFullscreen = true;
        iframe.referrerPolicy = "strict-origin-when-cross-origin";

        return iframe;
    }

    let iframe = createIframe();
    container.appendChild(iframe);

    function scheduleReload() {
        const randomTime = Math.floor(Math.random() * (139000 - 123000 + 1)) + 123000;

        setTimeout(() => {
            container.removeChild(iframe);
            iframe = createIframe();
            container.appendChild(iframe);

            scheduleReload();
        }, randomTime);
    }

    scheduleReload();
}
</script>
